{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/live_tv.css') }}">

<div class="dashboard-container">

    <div class="sidebar-left">
        <div class="brand-header">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="PD" style="height: 40px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
            <div style="display:none; width:40px; height:40px; background:#e50914; border-radius:8px;"></div>
        </div>

        <input type="text" id="channelSearch" class="search-box" placeholder="Search Channels...">

        <div class="scrollable-area channel-list" id="channelList">
            </div>
    </div>

    <div class="main-stage">

        <div class="favorites-section">
            <div class="panel-header">Favorites</div>
            <div class="favorites-row" id="favoritesRow">
                </div>
        </div>

        <div class="video-wrapper">
            <video id="videoPlayer" controls></video>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div id="currentProgramTitle" style="font-size: 1.2rem; font-weight: bold;">Select a Channel</div>
            <div id="connectionStatus" style="color: #2ecc71; font-size: 0.9rem;">‚óè Connected</div>
        </div>
    </div>

    <div class="sidebar-right">

        <div class="social-box chat-box-container">
            <div class="panel-header">Chat Box</div>
            <div class="chat-messages" id="chatMessages">
                <div class="msg"><span class="msg-user">System</span>Welcome to PeakDecline TV!</div>
            </div>
            <div class="chat-input-row">
                <input type="text" id="chatInput" class="chat-input" placeholder="Type message...">
                <button class="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>

        <div class="social-box users-box-container">
            <div class="panel-header">
                Users Online <span style="background:var(--accent-color); padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;" id="userCount">0</span>
            </div>
            <div class="scrollable-area" id="usersList" style="flex:1;">
                </div>
        </div>
    </div>

</div>

<script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="{{ url_for('static', filename='js/tv_player.js') }}"></script>
{% endblock %}