{% extends "base.html" %}

{% block title %}Live TV - PeakDecline{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/live_tv.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">

    <!-- LEFT SIDEBAR -->
    <div class="sidebar-left">
        <div class="brand-header">
            <span class="brand-text">PeakDecline</span>
        </div>

        <input
            type="text"
            id="search-box"
            class="search-box"
            placeholder="Search Channels..."
        >

        <div id="channel-list" class="channel-list custom-scroll"></div>
    </div>

    <!-- MAIN STAGE -->
    <div class="main-stage">

        <!-- FAVORITES -->
        <div class="favorites-section">
            <div class="section-title">Favorites</div>
            <div id="favorites-list" class="favorites-row custom-scroll-x"></div>
        </div>

        <!-- VIDEO -->
        <div class="video-wrapper">
            <video
                id="video-player"
                autoplay
                muted
                playsinline
                preload="auto"
                controls
            ></video>
        </div>

        <!-- INFO BAR (TEXT ONLY, NOT OVER VIDEO) -->
        <div class="video-info-bar">
            <h2 id="current-channel-name">Select a Channel</h2>
            <div class="live-indicator">
                <span class="status-dot-red"></span>
                <span id="current-status-text">Live</span>
            </div>
        </div>

    </div>

    <!-- RIGHT SIDEBAR -->
    <div class="sidebar-right">

        <!-- CHAT -->
        <div class="social-box chat-box-container">
            <div class="panel-header">
                <span>Chat Room</span>
            </div>

            <div id="chat-messages" class="chat-messages custom-scroll"></div>

            <div class="chat-input-row">
                <input
                    type="text"
                    id="chat-input"
                    class="chat-input"
                    placeholder="Type a message..."
                >
                <button id="send-btn" class="send-btn">Send</button>
            </div>
        </div>

        <!-- USERS -->
        <div class="social-box users-box-container">
            <div class="panel-header">
                <span>Users Online</span>
                <span id="user-count" class="badge">0</span>
            </div>
            <div id="users-list" class="users-list custom-scroll"></div>
        </div>

    </div>
</div>

<script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="{{ url_for('static', filename='js/tv_player.js') }}"></script>
{% endblock %}
